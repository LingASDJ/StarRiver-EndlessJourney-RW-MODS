[action_升级]
isLocked:true
convertTo:NONE

[core]
radius:75
displayRadius:75
dont_load:false
name:尼德霍格机改

@memory #:number[]
updateUnitMemory: #[0]= self.hp%10, #[1]= int((self.hp%100)/10), #[2]= int((self.hp%1000)/100),#[3]= int((self.hp%10000)/1000)
updateUnitMemoryRate:0

#displayDescription:尼德霍格
class:CustomUnitMetadata
price:1
unitsSpawnedOnDeath: 尼德霍格逝世*1

generation_credits: 70
generation_delay: 40
armour:20

displayText: Silence Nidehogg - Machine Dragon
displayDescription: -Hey! Don't speak.\n- Princess, I know all your secrets.\n- But in the simulation battle, we have no anti-resistance.\n-Only in the moment of breakthrough, we will have real relief.\n- Simulating war we will continue to reincarn, we must relieve this Curse!

displayText_zh: 寂静之声-尼德霍格-机甲战龙
displayDescription_zh: -嘘!别出声。\n-公主，我知道你的一切秘密。\n-但在模拟战里面，我们毫无反抗力。\n-只有在突破结界的那一刻，我们才会有真正的解脱。\n-模拟战我们会不断轮回，我们必须解除这一诅咒！

maxHp:7200

mass:25000
maxShield:2000

autoTriggerCooldownTime:0.1s

techLevel:2
buildSpeed:31.4s
isBio:true
tags:尼德霍格王
#copyFrom:ROOT:效果/效果.ini

canRepairBuildings: true
canRepairUnits : true

canReclaimResources: true

autoRepair: true

nanoRange: 500

nanoRepairSpeed: 2.4
nanoBuildSpeed: 2.4

[canBuild_1]
name: reclaim,MLB2,循环序列T2,GRCT2,MAC,MSC,四恒防空塔,模块化炮塔底座,翠绿灵塔
pos:  1

[graphics]
total_frames:3
image:尼德霍格机改.png
image_wreak:NONE
image_turret:主炮.png
image_shadow:AUTO
imageScale:1.6
lock_body_rotation_with_main_turret:false
dustEffect:true
animation_idle_start:0
animation_idle_end:2
animation_idle_speed:12
animation_attack_start:0
animation_attack_end:0
animation_attack_speed:2
scaleTurretImagesTo: 45
showHealthBar:false
[attachment_1]
x:30
y:30
prioritizeParentsMainTarget:true
alwaysAllowedToAttackParentsMainTarget:true
isUnselectable:false
canBeAttackedAndDamaged:true
addTransportedUnits:false
setDrawLayerOnBottom:false
redirectDamageToParent:false
canAttack:true
lockRotation:true
idleDir:0
keepAliveWhenParentDies:false
onCreateSpawnUnitOf:建造手臂

[attachment_2]
x:-30
y:30
prioritizeParentsMainTarget:true
alwaysAllowedToAttackParentsMainTarget:true
isUnselectable:false
canBeAttackedAndDamaged:true
addTransportedUnits:false
setDrawLayerOnBottom:false
redirectDamageToParent:false
canAttack:true
lockRotation:true
idleDir:0
keepAliveWhenParentDies:false
onCreateSpawnUnitOf:建造手臂

[attachment_3]
x:30
y:0
prioritizeParentsMainTarget:true
alwaysAllowedToAttackParentsMainTarget:true
isUnselectable:false
canBeAttackedAndDamaged:true
addTransportedUnits:false
setDrawLayerOnBottom:false
redirectDamageToParent:false
canAttack:true
lockRotation:true
idleDir:0
keepAliveWhenParentDies:false
onCreateSpawnUnitOf:建造手臂

[attachment_4]
x:-30
y:0
prioritizeParentsMainTarget:true
alwaysAllowedToAttackParentsMainTarget:true
isUnselectable:false
canBeAttackedAndDamaged:true
addTransportedUnits:false
setDrawLayerOnBottom:false
redirectDamageToParent:false
canAttack:true
lockRotation:true
idleDir:0
keepAliveWhenParentDies:false
onCreateSpawnUnitOf:建造手臂

[attachment_5]
x:0
y:0
prioritizeParentsMainTarget:true
alwaysAllowedToAttackParentsMainTarget:true
isUnselectable:false
canBeAttackedAndDamaged:true
addTransportedUnits:false
setDrawLayerOnBottom:false
redirectDamageToParent:false
canAttack:true
lockRotation:true
idleDir:0
keepAliveWhenParentDies:false
onCreateSpawnUnitOf:建造手臂

[turret_nano]
x:0
y:60
size:15
#image:魔龙炮塔B.png
shoot_sound:NONE
shoot_sound_vol:1
shoot_flame:NONE
canShoot:false

isMainNanoTurret: true

[turret_1]
x:-12
aimOffsetSpread:0
y:10
size:15
image:魔龙炮塔A.png

shoot_sound:NONE
shoot_sound_vol:1
shoot_flame:NONE
canShoot:true
recoilReturnTime:32
projectile:激光
delay:2s
limitingRange:390

[turret_2]
x:12
aimOffsetSpread:0
y:10
size:15
image:魔龙炮塔A.png
shoot_sound:NONE
shoot_sound_vol:1
shoot_flame:NONE
canShoot:true
recoilReturnTime:32
delay:2s
projectile:激光
limitingRange:390
#warmupStartEffect:CUSTOM:V

[turret_3]
x:-25
aimOffsetSpread:0
y:45
size:15
image:魔龙炮塔B.png
shoot_sound:NONE
shoot_sound_vol:1
shoot_flame:NONE
canShoot:true
recoilReturnTime:32
warmup:45
projectile:兰兹神炮

limitingRange:310

[turret_4]
x:25
aimOffsetSpread:0
y:45
size:15
image:魔龙炮塔B.png
shoot_sound:NONE
shoot_sound_vol:1
shoot_flame:NONE
canShoot:true
recoilReturnTime:32
warmup:45
projectile:兰兹神炮

limitingRange:310

[leg_1]
x:-15
y:30
attach_x:0
attach_y:0
moveSpeed:2.1
moveWarmUp:0.1s
rotateSpeed:2
heightSpeed:1
resetAngle:0
image_foot:尼德霍格leg.png
holdDisMin:0
holdDisMax:10

[leg_2]
x:15
y:30
copyFrom:1

[leg_3]
x:12
y:-35
copyFrom:1

[leg_4]
x:-12
y:-35
copyFrom:1

[attack]
canAttack:true
canAttackFlyingUnits:true
canAttackLandUnits:true
canAttackUnderwaterUnits:false
turretSize:30
turretTurnSpeed:1
#maxAttackRange:4500
shootDelay:0.05s

[projectile_激光]
areaDamage:30
areaRadius:125
life:6
flameWeapon:false
instant:true
instantReuseLast:true
deflectionPower:-1
instantReuseLast_alsoChangeTurretAim:true
moveWithParent:true
beamImage:SHARED:beam1.png
beamImageEnd:SHARED:beam1_end.png
beamImageStart:SHARED:beam1_start.png
beamImageOffsetRate:9
sweepOffsetFromTargetRadius:0.5
areaHitAirAndLandAtSameTime:true
color:#7E1717


[projectile_兰兹神炮]
targetGround: true
areaDamage: 25
areaRadius:120
life: 240
speed: 4
largeHitEffect:true
lightColor: #EEEEEE
targetGroundSpread: 10
initialUnguidedSpeedHeight: 1.2
image:projectiles_lz3_2.png
lightCastOnGround: true
turnSpeed:0
retargetingInFlight:true

[projectile_寄]
directDamage: 45000
life: 1
largeHitEffect: true
instant:true
laserEffect:true
instantReuseLast:true

[movement]
movementType: AIR
moveSpeed: 1.1
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

landOnGround: true


maxTurnSpeed: 1.3
turnAcceleration: 0.05

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  45


slowDeathFall: true

[ai]
useAsBuilder: true
useAsAttacker:false


[hiddenAction_增伤]
autoTrigger:if self.isAttacking
setUnitStats:shootDamageMultiplier+=0.1
buildSpeed:0s

[hiddenAction_减伤]
autoTrigger:if not self.isAttacking
setUnitStats:shootDamageMultiplier=1

[projectile_missile_bombardment]
directDamage:0
life:100
instant:true
explodeEffect:NONE
speed:10

####RP Bars####
[decal_阈值条]
layer:afterBody
image:ROOT:/assets/public/hpbar.png
imageScaleX:(self.resource.Hphold/self.maxHp)*82
alwaysStartDirAtZero:true
dirOffset:0
yOffsetAbsolute:100
pivotOffset:0
#Thanks 杰厕灵 in Code
alpha:0.9
xOffsetAbsolute: ((1-(self.hp / self.maxHp)) * (-${core.radius}/1.91)) 
#isVisible:if self.hp > self.maxHp*0.6
color:#FF00FF
order:0

[resource_Hphold]
displayName:阈值
hidden:false

[hiddenAction_受伤触发]
autoTriggerOnEvent: tookDamage()
alsoTriggerAction:减少阈值
[hiddenAction_减少阈值]
addResourcesWithLogic:Hphold=-int(self.resource.Hphold-self.hp)/20-2
alsoQueueAction:减少阈值
alsoTriggerOrQueueActionConditional:if self.resource.Hphold > self.hp
buildSpeed:0s
highPriorityQueue:true

[hiddenAction_静态血量上限绑定]
autoTriggerOnEvent:created
requireConditional:if self.maxHp > 0
setResourcesWithLogic:Hphold=${core.maxHp}

[hiddenAction_高于血量触发]
autoTrigger:if self.resource.Hphold > self.hp
addResourcesWithLogic:Hphold=-int(self.resource.Hphold-self.hp)/45-4
[hiddenAction_高于血量触发平滑设置]
autoTrigger:if self.resource.Hphold > self.hp
addResourcesWithLogic:Hphold=-int(self.resource.Hphold-self.hp)/60-2

[hiddenAction_低于血量重置绑定]
autoTrigger:if self.resource.Hphold < self.hp
setResourcesWithLogic:Hphold=self.hp

#----血条------

[decal_血条]
layer:afterBody
image:ROOT:/assets/public/hpbar.png
imageScaleX:(self.hp/self.maxHp)*82
alwaysStartDirAtZero:true
dirOffset:0
yOffsetAbsolute:100
pivotOffset:0
#Thanks 杰厕灵 in Code
xOffsetAbsolute: ((1-(self.hp / self.maxHp)) * (-${core.radius}/1.91)) 
#isVisible:if self.hp > self.maxHp*0.6
color:#8c8c8c
order:1

[decal_血条底板]
image:ROOT:/assets/magicdragonimg/dragon/dragon-hpbar.png
alwaysStartDirAtZero:true
dirOffset:0
imageScaleX:1.3
yOffsetAbsolute:100
xOffsetAbsolute:2
pivotOffset:0
order:-1
layer:onTop

[decal_xis_个位]
@define A:0
layer:onTop
order:10.01
yOffsetAbsolute:100
image:ROOT:/assets/oldsungodimg/lalaiye/hp-number.png
imageScale:0.7
frame: memory.#[${A}]
frame_width:6
frame_height:8
alwayStartDirAtZero:true
onlyWhileAlive:true
onlyOnNonPreview:true
xOffsetAbsolute: 5

[decal_xis_十位]
@copyFromSection: decal_xis_个位
@define A:1
image:ROOT:/assets/oldsungodimg/lalaiye/hp-number.png
isVisible:if memory.#[${A}] != 0 or memory.#[2] != 0 or memory.#[3] != 0

xOffsetAbsolute:0

[decal_xis_百位]
@copyFromSection: decal_xis_个位
@define A:2
image:ROOT:/assets/oldsungodimg/lalaiye/hp-number.png
isVisible:if memory.#[${A}] != 0 or memory.#[3] != 0

xOffsetAbsolute:-5

[decal_xis_千位]
@copyFromSection: decal_xis_个位
@define A:3
image:ROOT:/assets/oldsungodimg/lalaiye/hp-number.png
isVisible:if memory.#[${A}] != 0 

xOffsetAbsolute:-10