[hiddenAction_refund]
requireConditional: if numberOfUnitsInTeam(greaterThan=1,withTag='otrez',incompleteBuildings=true)
autoTriggerOnEvent: created
addResources: 75700,风暴日晷=1250
deleteSelf: true
showMessageToPlayer: [错误:最多1个奥特莱兹]

[core]
name: otrez
class: CustomUnitMetadata
price: 150000,风暴日晷=2500
maxHp: 100000
armour:25
mass: 214783647
transportSlotsNeeded:1
displayText:Otrez
displayText_zh:奥特莱兹
displayDescription:- Heavy air space Mothership \n- 8 combined space torpedo \n- 12 sub guns \n- Ultra fast production carrier based aircraft
displayDescription_zh:-重空空天母舰\n-8联装空际鱼雷\n-12座副炮\n-超快速生产舰载机
techLevel: 2
experimental: true
builtFrom_1_name: experimentalLandFactory
builtFrom_1_pos:  5.7
buildSpeed: 80s
#availableInDemo: true
maxShield: 20000
shieldRegen: 1
shieldRenderRadius:0
tags:otrez,starShip,otrezAlive,otrezUnfull
fogOfWarSightRange: 50
uiTargetRadius:50
radius: 50
soundOnNewSelection:voc_carrier_1.ogg,voc_carrier_2.ogg,voc_carrier_3.ogg,voc_carrier_4.ogg,voc_carrier_5.ogg
soundOnMoveOrder:voc_carrier_1.ogg,voc_carrier_2.ogg,voc_carrier_3.ogg,voc_carrier_4.ogg,voc_carrier_5.ogg
soundOnAttackOrder:voc_carrier_1.ogg,voc_carrier_2.ogg,voc_carrier_3.ogg,voc_carrier_4.ogg,voc_carrier_5.ogg
#transportSlotsNeeded:114514
displayRadius: 130
isBio: false
selfRegenRate:1.5
unitsSpawnedOnDeath:坠毁数重置器
energyMax:8
energyRegen:0.03
energyNeedsToRechargeToFull:true
#maxTransportingUnits: 16
transportUnitsRequireMovementType: AIR
transportUnitsRequireTag: dancer
transportUnitsHealBy: 0.8
transportUnitsCanUnloadUnits: true
transportUnitsAddUnloadOption: false
[hiddenAction_出场]
autoTriggerOnEvent:completeAndActive
playSoundGlobally:危.ogg:5
showMessageToAllPlayers:[警告]奥特莱兹——已被建造
[hiddenAction_死亡]
autoTriggerOnEvent:destroyed
showMessageToAllPlayers:奥特莱兹——已被摧毁
[hiddenAction_开场舰载机]
autoTriggerOnEvent:created
addUnitsIntoTransport:奥特莱兹舰载机*16
[hiddenAction_重置器]
autoTrigger: if not self.hasUnitInTeam(withTag='otrezUnfull') and self.resource(type='奥特莱兹舰载机坠毁数',greaterThan=0)
produceUnits:坠毁数重置器
#[hiddenAction_负数重置器]
#autoTrigger: if not self.hasUnitInTeam(withTag='otrezUnfull') and self.resource(type='奥特莱兹舰载机坠毁数',lessThan=0)
#produceUnits:负坠毁数重置器
[hiddenAction_触发]
autoTrigger:if self.resource(type='奥特莱兹舰载机坠毁数',greaterThan=0) and not self.transportingCount(greaterThan=15)
alsoQueueAction:生产舰载机
[action_生产舰载机]
text: Carrier Based Aircrafts is in Production
text_zh:舰载机重造系统在线
description: -Carrier based aircraft will guard otrez
description_zh:-每当舰载机损失时奥特莱兹会迅速生产新的舰载机
canPlayerCancel: false
buildSpeed:0.3s
isLocked:true
produceUnits:奥特莱兹舰载机
addResources=奥特莱兹舰载机坠毁数=-1
canPlayerCancel: false
pos:1
[hiddenAction_无敌人]
autoTrigger: if self.tags(includes='otrezAttacking') and not numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=950)
temporarilyRemoveTags: otrezAttacking
[hiddenAction_起飞]
autoTrigger: if not self.tags(includes='otrezAttacking') and numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=950)
temporarilyAddTags: otrezAttacking
forceUnloadTransportNow:true
[hiddenAction_下去]
autoTrigger: if self.tags(includes='otrezAttacking') and numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=1000)
forceUnloadTransportNow:true
[hiddenAction_满了]
autoTrigger: if self.transportingCount(greaterThan=15)
temporarilyRemoveTags: otrezUnfull
temporarilyAddTags: otrezFull
[hiddenAction_没满]
autoTrigger: if self.transportingCount(lessThan=16)
temporarilyAddTags: otrezUnfull
temporarilyRemoveTags: otrezFull
[action_selectSlot1]
@define slotId: 1
buildSpeed: 0s
text: [
textAddUnitName: unitRef self.attachment(slot="unitSlot${slotId}")
textPostFix: ]
descriptionAddFromUnit: unitRef self.attachment(slot="unitSlot${slotId}")
descriptionAddUnitStats: unitRef self.attachment(slot="unitSlot${slotId}")
addResources: unsetFlag=1-16, setFlag=${slotId}
isGuiBlinking: if self.hasFlag(id=${slotId})
displayType: action
unitShownInUI: unitRef self.attachment(slot="unitSlot${slotId}")
iconExtraIsVisible: if self.hasFlag(id=${slotId})
iconExtraImage: icon_selected.png
pos:2
canPlayerCancel: false
allowMultipleInQueue: false
alwaysSinglePress: true
extraLagHidingInUI: true
[action_selectSlot2]
@copyFromSection: action_selectSlot1
@define slotId: 2
[action_selectSlot3]
@copyFromSection: action_selectSlot1
@define slotId: 3
[action_selectSlot4]
@copyFromSection: action_selectSlot1
@define slotId: 4
[action_selectSlot5]
@copyFromSection: action_selectSlot1
@define slotId: 5
[action_selectSlot6]
@copyFromSection: action_selectSlot1
@define slotId: 6
[action_selectSlot7]
@copyFromSection: action_selectSlot1
@define slotId: 7
[action_selectSlot8]
@copyFromSection: action_selectSlot1
@define slotId: 8
[action_selectSlot9]
@copyFromSection: action_selectSlot1
@define slotId: 9
[action_selectSlot10]
@copyFromSection: action_selectSlot1
@define slotId: 10
[action_selectSlot11]
@copyFromSection: action_selectSlot1
@define slotId: 11
[action_selectSlot12]
@copyFromSection: action_selectSlot1
@define slotId: 12
[action_selectSlot13]
@copyFromSection: action_selectSlot1
@define slotId: 13
[action_selectSlot14]
@copyFromSection: action_selectSlot1
@define slotId: 14
[action_selectSlot15]
@copyFromSection: action_selectSlot1
@define slotId: 15
[action_selectSlot16]
@copyFromSection: action_selectSlot1
@define slotId: 16

[attachment_unitSlot1]
x:-20
y:0
addTransportedUnits: true
setDrawLayerOnBottom: true
canBeAttackedAndDamaged: false
isUnselectable: true
canAttack:false
addTransportedUnits: true
[attachment_unitSlot2]
@copyFromSection: attachment_unitSlot1
x:20
y:0
[attachment_unitSlot3]
@copyFromSection: attachment_unitSlot1
x:-40
y:-40
[attachment_unitSlot4]
@copyFromSection: attachment_unitSlot1
x:40
y:-40
[attachment_unitSlot5]
@copyFromSection: attachment_unitSlot1
x:-20
y:-40
[attachment_unitSlot6]
@copyFromSection: attachment_unitSlot1
x:20
y:-40
[attachment_unitSlot7]
@copyFromSection: attachment_unitSlot1
x:-20
y:-60
[attachment_unitSlot8]
@copyFromSection: attachment_unitSlot1
x:20
y:-60
[attachment_unitSlot9]
@copyFromSection: attachment_unitSlot1
x:-40
y:-60
[attachment_unitSlot10]
@copyFromSection: attachment_unitSlot1
x:40
y:-60
[attachment_unitSlot11]
@copyFromSection: attachment_unitSlot1
x:-20
y:-100
[attachment_unitSlot12]
@copyFromSection: attachment_unitSlot1
x:20
y:-60
[attachment_unitSlot13]
@copyFromSection: attachment_unitSlot1
x:-40
y:-100
[attachment_unitSlot14]
@copyFromSection: attachment_unitSlot1
x:40
y:-60
[attachment_unitSlot15]
@copyFromSection: attachment_unitSlot1
x:-40
y:-60
[attachment_unitSlot16]
@copyFromSection: attachment_unitSlot1
x:40
y:-60
[graphics]
total_frames: 4

image:        .奥特莱兹.png
image_wreak: .奥特莱兹死亡.png
image_shadow: SHADOW:.奥特莱兹4.png
shadowOffsetX:0
shadowOffsetY:10

icon_zoomed_out:carrier_icon.png

animation_moving_start: 0
animation_moving_end: 3
animation_moving_speed: 1

animation_idle_start: 0
animation_idle_end: 3
animation_idle_speed: 1
[arm_1]
x:0
y:0
image_end:.能量板.png
drawOverBody: false
image_end_teamColors: true
[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
maxAttackRange:660
turretMultiTargeting:true
[turret_t1]
#torpedo
invisible: true
x: 0
y: 0
idleDir:0
canAttackFlyingUnits: true
canAttackLandUnits:   false
delay:3s
projectile: 2
energyUsage:1
size: 1
turnSpeed: 15
shoot_sound:nuke_launch
shoot_sound_vol:0.15
shoot_flame:custom:nukeLaunch_wave, custom:nukeLaunch_light
aimOffsetSpread:2
[turret_t2]
#top right cannon
x: 0
y: 0
copyFrom: t1
linkDelayWithTurret: t1
warmup:12
[turret_t3]
#top right cannon
x: 0
y: 0
copyFrom: t1
linkDelayWithTurret: t1
warmup:24
[turret_t4]
#top right cannon
x: 0
y: 0
copyFrom: t1
linkDelayWithTurret: t1
warmup:36
[turret_t5]
#top right cannon
x: 0
y: 0
copyFrom: t1
linkDelayWithTurret: t1
warmup:48
[turret_t6]
#top right cannon
x: 0
y: 0
copyFrom: t1
linkDelayWithTurret: t1
warmup:60
[turret_t7]
#top right cannon
x: 0
y: 0
copyFrom: t1
linkDelayWithTurret: t1
warmup:72
[turret_t8]
#top right cannon
x: 0
y: 0
copyFrom: t1
linkDelayWithTurret: t1
warmup:84
[projectile_2]
#torpedo
areaDamage: 300
areaRadius: 80

life: 400
speed: 0
targetSpeed: 6
drawSize: 0.8
trailEffect: true
largeHitEffect: true
image:torpedo.png
drawUnderUnits:true
trailEffect: CUSTOM:trail3


explodeEffect: largeExplosion, CUSTOM:shockwave
explodeEffectOnShield: largeExplosion, CUSTOM:shockwave

[effect_shockwave]
priority:high

stripIndex:shockwave
life: 50
scaleFrom: 0.5
scaleTo: 2.5

alsoPlaySound:buiding_explode:4

[effect_projectileTrail]

stripIndex: effects
frameIndex: 0
#image: SHARED:light_50.png

life: 20
fadeOut: true
attachedToUnit: false
color: #ffff925c
fadeInTime:5
scaleFrom: 0.6
scaleTo: 0.9
alpha: 0.6
drawUnderUnits:false
#ySpeedRelative:-1
atmospheric:true

dirOffsetRandom:180

xSpeedAbsoluteRandom: 0.2
ySpeedAbsoluteRandom: 0.2

ySpeedRelative:0.8
[effect_trail3]


createWhenZoomedOut: false

xOffsetRelative: 0

yOffsetRelative: -10


image: trail.png

life: 40

fadeOut: true

attachedToUnit: false

fadeInTime:2

scaleFrom: 4

scaleTo: 0

alpha: 6

drawUnderUnits:true

priority:high
[effect_nukeLaunch_wave]
priority:high

stripIndex:shockwave
life: 50
scaleFrom: 0.5
scaleTo: 2.5

[effect_nukeLaunch_smoke]
priority:high

xOffsetAbsoluteRandom: 10
yOffsetAbsoluteRandom: 10

frameIndex: 0
stripIndex: smoke_black

spawnChance: 0.3

life: 90
fadeOut: true
attachedToUnit: false
#color: #fdc14d
color: #FFEEEE00

fadeInTime:5
scaleFrom: 0.3
scaleTo: 0.8
alpha: 0.9
drawUnderUnits:false
liveAfterAttachedDies: false
hSpeed:0.4
xSpeedAbsoluteRandom:0.9
ySpeedAbsoluteRandom:0.9
dirOffsetRandom:180
atmospheric: true


[effect_nukeLaunch_light]
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #FFFFFF
scaleFrom: 1.7
scaleTo: 1.7
alpha: 0.7
drawUnderUnits:false

[turret_cannon1]
#top left cannon
x: 0
y: 0
attachedTo: base1
slave: true

projectile: gun

size:20

turnSpeed: 0

delay:1s

shoot_sound:large_gun_fire2
shoot_sound_vol:0.18
shoot_flame:large
shoot_light:#FFff925c

image: .舰炮管.png

canShoot: true

warmup:0

recoilOffset: -8
recoilOutTime: 3
recoilReturnTime: 27


[turret_cannon2]
#top right cannon
x: 0
y: 0
attachedTo: base2
copyFrom: cannon1

[turret_cannon3]
#top right cannon
x: 0
y: 0
attachedTo: base3
copyFrom: cannon1

[turret_cannon4]
#top right cannon
x: 0
y: 0
attachedTo: base4
copyFrom: cannon1

[turret_cannon5]
#top right cannon
x: 0
y: 0
attachedTo: base5
copyFrom: cannon1

[turret_cannon6]
#top right cannon
x: 0
y: 0
attachedTo: base6
copyFrom: cannon1

[turret_cannon7]
#top right cannon
x: 0
y: 0
attachedTo: base7
copyFrom: cannon1

[turret_cannon8]
#top right cannon
x: 0
y: 0
attachedTo: base8
copyFrom: cannon1

[turret_base1]
#top left base
x: -96.5
y: 85.5
canShoot: false
turnSpeed: 2.5
turnSpeedAcceleration: 0.5
recoilOffset: -0.35
recoilOutTime: 3
recoilReturnTime: 27
image: .舰炮座.png

[turret_base2]
#top right base
x: 96.5
y: 85.5
copyFrom: base1

[turret_base3]
#top right base
x: -67.5
y: 130.5
copyFrom: base1

[turret_base4]
#top right base
x: 67.5
y: 130.5
copyFrom: base1

[turret_base5]
#top right base
x: -79.5
y: -136.5
copyFrom: base1

[turret_base6]
#top right base
x: 79.5
y: -136.5
copyFrom: base1

[turret_base7]
#top right base
x: -97.5
y: -64.5
copyFrom: base1

[turret_base8]
#top right base
x: 97.5
y: -64.5
copyFrom: base1
[projectile_gun]
areaDamage: 560
areaRadius: 150
life: 400
frame: 5
speed: 14
drawSize: 1.5
largeHitEffect: true
drawUnderUnits:true
lightColor: #ffff925c
lightSize: 0

[movement]
movementType:AIR
moveSpeed: 1.2
moveAccelerationSpeed: 0.015
moveDecelerationSpeed: 0.05
maxTurnSpeed: 0.5
turnAcceleration: 0.05

targetHeight:45
startingHeightOffset:500

slowDeathFall:true
fallingAccelerationDead:0.05

[ai]

buildPriority: 0.5

