[resource_超级核弹]
displayName:超级核弹

[resource_重型核弹]
displayName:重型核弹

[resource_核弹盛宴]
displayName:核弹盛宴

[hiddenAction_refund]
requireConditional: if numberOfUnitsInTeam(greaterThan=19,withTag='反核弹',incompleteBuildings=true)
autoTriggerOnEvent: created
addResources: 15000
deleteSelf: true
showMessageToPlayer: [错误:最大反核发射井为20个]

[core]
name: 反核防御
class: CustomUnitMetadata


#typo in original
displayLocaleKey: AntiNukeLaucher

overrideAndReplace: AntiNukeLaucher

#isLockedIfGameModeNoNuke:true一

tags:反核弹

price: 15000
maxHp: 10000
mass: 9000

#footprint used for collisions with units (left, up, right, down)
footprint: -1,-1,1,1

#used for placement, and placement of other buildings
constructionFootprint: -1,-1,1,1
#nukeOnDeath: true

#nukeOnDeathRange: 200
#nukeOnDeathDamage: 2000
#nukeOnDeathDisableWhenNoNuke: true


techLevel: 1
buildSpeed: 0.001
#availableInDemo: true

radius: 35
#displayRadius: 25
isBio: false
isBuilding: true

softCollisionOnAll: 20



exit_x:0
exit_y:-1

[action_buildAntiNuke]
price:  15000
text: i:gui.actions.buildAntiNuke
description:i:gui.actions.buildAntiNuke.description
displayType: NONE
buildSpeed: 25s
pos: 0.2
isActive:if self.ammoIncludingQueued(lessThan=12)
addResources: ammo=1

[action_buildAntiNuke2]
price:  65000
text: 拦截重型核弹
description:自动拦截附近的所有重型核弹
displayType: NONE
buildSpeed: 45s
pos: 0.2
addResources: 重型核弹=1

[action_buildAntiNuke3]
price:  105000
text: 拦截超级核弹
description:自动拦截附近的所有超级核弹
displayType: NONE
buildSpeed: 45s
pos: 0.2
addResources: 超级核弹=1

[action_buildAntiNuke4]
price:  205000
text: 拦截核弹盛宴
description:自动拦截附近的所有核弹盛宴
displayType: NONE
buildSpeed: 45s
pos: 0.2
addResources: 核弹盛宴=25

#ai_isDisabled: if self.ammo(greaterThan=3)

[hiddenAction_AI]
autoTrigger:if self.isControlledByAI() and self.hasResources(30000) and self.ammoIncludingQueued(lessThan=12)
alsoQueueAction:buildAntiNuke

[action_showAntiNukeCount]
#infoOnly: true
addResources: ammo=1
price:  ammo=1
text: i:gui.actions.antiNukeCount
description:i:gui.actions.antiNukeCount.description
displayType: none
buildSpeed: 0s
pos: 0.1
displayRemainingStockpile: true
highPriorityQueue: true
isActive:false



[graphics]
total_frames: 1

image:        antinuke_launcher_front.png
image_back:   antinuke_launcher_back.png
image_wreak:  antinuke_launcher_dead.png

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: NONE
shadowOffsetX:1
shadowOffsetY:1


[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
maxAttackRange: 9999


[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1




[turret_silo]
#anti-nuke turret
x: 0
y: 10
idleDir:0

invisible: true


interceptProjectiles_withTags: nuke
interceptProjectiles_andTargetingGroundUnderDistance: 5000
interceptProjectiles_andUnderDistance: 4200
interceptProjectiles_andOverHeight:50


shoot_sound:nuke_launch
shoot_sound_vol:0.15
shoot_light:#FFEECCCC

projectile: antiNukeProjectile
size: 1

turnSpeed: 40

resourceUsage: ammo=1

shoot_flame:shockwave, smoke
#shoot_flame:custom:nukeLaunch



onShoot_playAnimation: fireNuke

[turret_silox]
#anti-nuke turret
x: 0
y: 10
idleDir:0

invisible: true


interceptProjectiles_withTags: nukeX
interceptProjectiles_andTargetingGroundUnderDistance: 5000
interceptProjectiles_andUnderDistance: 4200
interceptProjectiles_andOverHeight:50


shoot_sound:nuke_launch
shoot_sound_vol:0.15
shoot_light:#FFEECCCC

projectile: antiNukeProjectile
size: 1

turnSpeed: 40

resourceUsage: 重型核弹=1

shoot_flame:shockwave, smoke
#shoot_flame:custom:nukeLaunch



onShoot_playAnimation: fireNuke

[turret_siloz]
#anti-nuke turret
x: 0
y: 10
idleDir:0

invisible: true


interceptProjectiles_withTags: nukeZ
interceptProjectiles_andTargetingGroundUnderDistance: 5000
interceptProjectiles_andUnderDistance: 4200
interceptProjectiles_andOverHeight:50


shoot_sound:nuke_launch
shoot_sound_vol:0.15
shoot_light:#FFEECCCC

projectile: antiNukeProjectile
size: 1

turnSpeed: 40

resourceUsage: 超级核弹=1

shoot_flame:shockwave, smoke
#shoot_flame:custom:nukeLaunch



onShoot_playAnimation: fireNuke

[turret_silocx]
#anti-nuke turret
x: 0
y: 10
idleDir:0

invisible: true


interceptProjectiles_withTags: nukeC
interceptProjectiles_andTargetingGroundUnderDistance: 5000
interceptProjectiles_andUnderDistance: 4200
interceptProjectiles_andOverHeight:50


shoot_sound:nuke_launch
shoot_sound_vol:0.15
shoot_light:#FFEECCCC

projectile: antiNukeProjectile
size: 1

turnSpeed: 40

resourceUsage: 核弹盛宴=1

shoot_flame:shockwave, smoke
#shoot_flame:custom:nukeLaunch



onShoot_playAnimation: fireNuke

[projectile_antiNukeProjectile]
#anti-nuke
directDamage: 600

life: 99999
speed: 10
retargetingInFlight:true
retargetingInFlightSearchDelay:10
retargetingInFlightSearchRange:1500
retargetingInFlightSearchLead:1
targetSpeed: 35
targetSpeedAcceleration:0.05

trailEffect: true
largeHitEffect: true
ballistic: true
ballistic_delaymove_height:80
ballistic_height: 110
frame: 10
#shadowFrame:1

drawType:0

targetGround: true
areaDamage: 100
areaRadius: 60

areaExpandTime:75

deflectionPower:-1


lightColor: #FFEEEE00
lightSize: 1

alwaysVisibleInFog: true

[arm_1]
x:1
y:12
image_end:antinuke_launcher_door_r.png
image_end_teamColors:true

#x:13
#y:-9

[arm_2]
x:-2
y:11
image_end:antinuke_launcher_door_l.png
image_end_teamColors:true

#x:-14
#y:14

[animation_fireNuke]

blendIn: 0.5s
blendOut: 3.5s

arm1_0: {x:5, y:0}
arm2_0: {x:-5, y:0}

arm1_1.2s: {x:3, y:0}
arm2_1.2s: {x:-3, y:0}


#arm1_0s: {x:0, y:0}
#arm2_0s: {x:0, y:0} 

#arm1_1.400s: {x:10, y:-8}
#arm2_1.400s: {x:-9, y:5}


[effect_nukeLaunch]

#image: shockwave_large.png



[ai]
buildPriority: 0.32

maxEachBase: 4
maxGlobal: 8