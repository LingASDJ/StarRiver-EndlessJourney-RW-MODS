
[core]

name: 大激光
strictLevel: 1

price: 0
radius: 10
mass: 100000

maxHp: 1

class: CustomUnitMetadata
techLevel: 1
showInEditor: false
tags: 激光,不可检测

canNotBeDirectlyAttacked: true
isUnrepairableUnit: true
disableAllUnitCollisions: true
ignoreInUnitCapCalculation: true
disableDeathOnZeroHp: true

autoTriggerCooldownTime_allowDangerousHighCPU: true
autoTriggerCooldownTime: 0.005s


[graphics]
image: SHARED:blank.png
image_turret: NONE
shadowOffsetX:1
shadowOffsetY:1
turretImageScale:0.85
teamColorsOnTurret: true
[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: false

maxAttackRange: 1000
# 这个炮塔建议比主体的最大范围多100
disablePassiveTargeting: true

turretSize: 24
turretTurnSpeed: 4
# maxAttackRange: 345 主体的最大范围
shootDelay: 1
aimOffsetSpread: -0.01

[turret_2]
x: 0
y: 0
canAttack: false
limitingMinRange: 9
idleDir:0
[turret_1]
x: 0
y: 0
attachedTo:2
projectile: 1
image:SHARED:blank.png
turnSpeed: 4
# turnSpeed: 9999 不改炮塔转速好像也没bug
turnSpeedAcceleration: 1.0
shoot_sound:碎星炮.ogg
shoot_sound_vol:1
canShoot: true
shoot_light:#FFFFBE67
resourceUsage: hasFlag= 0, ammo= 1
limitingMinRange: 9
size:1
canOnlyAttackUnitsWithTags: 激光

canAttackLandUnits: true


[projectile_1]
tags:能量伤害
directDamage: 16
life: 20

instant:true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true

beamImage:      逐星裁决.png
beamImageEnd:   大光束末端.png
beamImageStart: 大光束末端.png
beamImageOffsetRate: 4
spawnUnit:激光伤害
largeHitEffect: true

laserEffect:true
[turret_3]
# 拦截中立敌对发射的子弹2，使激光炮塔可以攻击
x: 0
y: 0
projectile: 2
limitingRange: 9
resourceUsage: setFlag= 0, ammo= -120
invisible:true

canAttack: false
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: true

interceptProjectiles_withTags: 拦截2
interceptProjectiles_andTargetingGroundUnderDistance: 142857
interceptProjectiles_andUnderDistance: 9
interceptProjectiles_andOverHeight: -100

onShoot_triggerActions: 2
# 重置自定义计数器

[projectile_2]
life: 4
speed: 99
deflectionPower: -1

directDamage: 0
instant: true
invisible: true

explodeEffect: none


[hiddenAction_1]
autoTrigger: if self.customTimer(laterThanSeconds= 1.0) and self.isAmmoEmpty() or self.ammo(greaterThan=121)
#  每隔一秒重新锁定中立敌对 or 出bug了重置一下
resetCustomTimer: true
clearAllWaypoints: true
addResources: unsetFlag= 0, ammo= -600
addWaypoint_type: attack
addWaypoint_prepend: true
addWaypoint_target_nearestUnit_tagged: 激光
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_nearestUnit_maxRange: 9


[hiddenAction_2]
resetCustomTimer: true


[movement]
movementType: AIR
moveSpeed: 1
maxTurnSpeed: 10

targetHeight: 0
targetHeightDrift: 0

moveIgnoringBody: true






