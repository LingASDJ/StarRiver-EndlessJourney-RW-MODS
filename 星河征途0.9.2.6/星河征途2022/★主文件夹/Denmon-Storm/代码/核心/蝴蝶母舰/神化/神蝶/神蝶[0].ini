#核心代码  #92-4-R1
#神蝶的数值按需求更改

[ai]
useAsBuilder: true

[attack]
canAttack:true
canAttackFlyingUnits:true
canAttackLandUnits:true
canAttackUnderwaterUnits:false
maxAttackRange:660
shootDelay:0.7s
turretMultiTargeting:true
#57-L61

[attachment_圈圈]
x: 0
y: 0

setDrawLayerOnBottom: true
onCreateSpawnUnitOf: R

[action_升级]
price:1000000,妖姬粒子=50000
text:Upgrade Butterfly
text_zh:魔王苏醒
description:Memories\nA: I am not very optimistic about this gambling\nB: Everything is caused by your own blame\nC: Shut up, Magic girl’s City is not your plaything\n-Upgrade the butterfly\n-Change the lightning cannon into a laser gun.
description_zh:记忆碎片\n-最后的记忆已经全部释放，她知道自己该干什么！
allowMultipleInQueue:false
buildSpeed:80s
convertTo:生日快乐X
pos:1
showMessageToPlayer:You have successfully upgraded the butterfly Mother-Ship the basic to LV2
showMessageToPlayer_zh:%{self.playerName}的魔王血蝶苏醒了，灾难正在袭来。
ai_isHighPriority:true
isLocked:if not self.resource(type='血蝶审判',greaterThan=0)
isLockedMessage:---------------------------------------------------

[projectile_蝶吻]
areaDamage:9860
areaExpandTime:15
beamImage:蝶吻.png
life:12
instantReuseLast:true
explodeEffect:CUSTOM:蝶吻
explodeEffectOnShield:CUSTOM:蝶吻
areaRadius:78
speed:1
instant:true
largeHitEffect:false
lightingEffect:true
frame:1

[turret_右火炮]
x:42
y:-50
projectile:火炮
size:12
shoot_flame:CUSTOM:炮击
image:火炮.png
recoilOffset:-7
recoilOutTime:6
recoilReturnTime:70
delay:0.8s
shoot_sound:火炮开火.ogg
canAttackFlyingUnits:false
turnSpeed:2
turnSpeedAcceleration:0.01

[turret_左火炮]
copyFrom:右火炮
x:-42
y:-50

[projectile_火炮]
areaDamage:4582
areaRadius:60
largeHitEffect:true
speed:6
life:270
image:火炮炮弹.png
deflectionPower:12
trailEffect:CUSTOM:一般尾焰
trailEffectRate:1

[turret_右]
x:42
y:0
projectile:D
size:8
shoot_flame:CUSTOM:炮击
image:副炮.png
recoilOffset:-3
recoilOutTime:6
recoilReturnTime:12
shoot_sound:副炮开火.ogg
idleDir:-19
limitingRange:470
turnSpeed:2.4
turnSpeedAcceleration:0.05
warmup:12
warmupStartEffect:CUSTOM:副炮预热

[turret_左]
copyFrom:右
x:-42
y:0
idleDir:19

[projectile_D]
directDamage:424
speed:7
trailEffect:CUSTOM:一般尾焰
deflectionPower:3
trailEffectRate:0.1
life:260
drawSize:0.5
image:飞弹.png
explodeEffect:CUSTOM:副炮爆炸
explodeEffectOnShield:CUSTOM:副炮爆炸

[turret_轨道炮]
warmup:0.6s
x:0
limitingRange:520
y:-6
turnSpeed:1.2
image:轨道炮.png
turnSpeedAcceleration:0.1
projectile:轨道炮
recoilOffset:-11
recoilOutTime:7
recoilReturnTime:42

[projectile_轨道炮]
areaDamage:2525
areaRadius:450
trailEffect:CUSTOM:轨道粒子
deflectionPower:30
explodeEffect:CUSTOM:轨道炮命中
explodeEffectOnShield:CUSTOM:轨道炮命中
areaExpandTime:60
areaHitAirAndLandAtSameTime:true
trailEffectRate:1
life:600
speed:0
targetSpeed:9
targetSpeedAcceleration:0.04
instant:false
drawSize:1.2
image:飞弹.png

[turret_以太]
x:0
y:0
projectile:以太
canShoot:false

[projectile_以太]
directDamage:0
instant:true
explodeEffect:NONE
speed:1
life:30
spawnUnit:以太雷电

[turret_蝶吻]
x:0
y:-40
size:18
turnSpeed:1.1
turnSpeedAcceleration:0.01
limitingAngle:30
projectile:蝶吻
shoot_sound:蝶吻.ogg
shoot_sound_vol:1
shoot_flame:CUSTOM:蝶吻玲
delay:0.6s
aimOffsetSpread:0
image:蝶吻炮.png
recoilOffset:-9
recoilOutTime:6
recoilReturnTime:30
#以下为其它代码
#这一段核心的数值应该不用改吧

[core]
radius:70
##REMOVE THIS TO USE UNIT##
dont_load:false
copyFrom:效果.ini
name:God
displayText: Magic blue butterfly butterfly
displayDescription: This is the best ending?\ n- Although it is uncomfortable, it is already the end.
displayText_zh: 幻蓝神蝶母舰
displayDescription_zh: 这便是，最好的结局吗？\n-虽然很不舍，但已经是终点了。
class:CustomUnitMetadata
price:4000
maxHp:82000
maxShield:40000
mass:2200000
isUnselectable:false
armour:4
showInEditor:true
tags:神蝶,God,Re
nanoFactorySpeed:4

canRepairBuildings: true
canRepairUnits : true
armour:160
canReclaimResources: true

selfRegenRate:2

autoRepair: true

nanoRange: 404

nanoRepairSpeed: 4
nanoBuildSpeed: 8

generation_resources: 妖姬粒子=25
generation_delay: 40

[hiddenAction_死亡]
autoTriggerOnEvent:destroyed
showMessageToAllPlayers:Finally, it still failed .....%{self.playerName}The Die-God-has been destroyed.
showMessageToAllPlayers_zh:最后，还是失败了.....%{self.playerName}的神蝶-已被摧毁。

[canBuild_1]
name: reclaim
pos:  1

[canBuild_2]
name: HB1,SB1,KB1,Star-J,P,妖姬拦截器,亚蓝矩阵炮塔
pos:  2

[canBuild_5]
name: Star1
pos:  5
isLocked:if not numberOfUnitsInTeam(withTag='屯蛋狂魔', lessThan=20,incompleteBuildings=true)

[graphics]
total_frames:8
image:神蝶.png
image_wreak:NONE
image_turret:NONE
image_shadow:AUTO
animation_idle_start:0
animation_idle_end:7
animation_idle_speed:8
animation_moving_start:0
animation_moving_end:7
animation_moving_speed:8
animation_attack_start:0
animation_attack_end:7
animation_attack_speed:8
movementEffect:CUSTOM:神蝶尾焰
movementEffectRate:0.5

[movement]
movementType:AIR
moveSpeed:1.8
moveAccelerationSpeed:0.012
moveDecelerationSpeed:0.01
targetHeight:35
targetHeightDrift:1
maxTurnSpeed:0.9
turnAcceleration:0.02
reverseSpeedPercentage:0
moveIgnoringBody:false




[action_插槽1]
@define slotId: 1
buildSpeed: 0s
#text: Slot ${slotId}
text: [
textAddUnitName: unitRef self.attachment(slot="蝶${slotId}") 
textPostFix: ]
descriptionAddFromUnit: unitRef self.attachment(slot="蝶${slotId}")
descriptionAddUnitStats: unitRef self.attachment(slot="蝶${slotId}")
addResources: unsetFlag=1-2, setFlag=${slotId}
#注意unsetFlag=1-3，相当于最多3个模块。如果需要更多就加大。比如25个，就是unsetFlag=1-25
isGuiBlinking: if self.hasFlag(id=${slotId})
displayType: action
unitShownInUI: unitRef self.attachment(slot="蝶${slotId}")
#其他代码直接复制就是了
iconExtraIsVisible: if self.hasFlag(id=${slotId})
iconExtraImage: UI.png
#设置选择的素材图

[action_插槽2]
@copyFromSection: action_插槽1
@define slotId: 2

[hiddenAction_a]
autoTrigger:if self.customTimer(laterThanSeconds=10)
resetCustomTimer:true
fireTurretXAtGround:以太
fireTurretXAtGround_withOffset:0,100
alsoTriggerAction:b

[hiddenAction_b]
fireTurretXAtGround:以太
fireTurretXAtGround_withOffset:100,0
alsoTriggerAction:c

[hiddenAction_c]
fireTurretXAtGround:以太
fireTurretXAtGround_withOffset:0,-100
alsoTriggerAction:d

[hiddenAction_d]
fireTurretXAtGround:以太
fireTurretXAtGround_withOffset:-100,0
#可以的话我想让你把这两个单位的属性写在行动栏里，我不会…抱歉

#当然

[attachment_蝶1]
x:150
y:0
prioritizeParentsMainTarget:true
alwaysAllowedToAttackParentsMainTarget:true
isUnselectable:false
canBeAttackedAndDamaged:true
addTransportedUnits:false
setDrawLayerOnBottom:false
redirectDamageToParent:false
canAttack:true
lockRotation:false
showAllActionsFrom:if self.hasFlag(id=1)
idleDir:0
keepAliveWhenParentDies:false
onCreateSpawnUnitOf:蝶心

[attachment_蝶2]
x:-150
y:0
prioritizeParentsMainTarget:true
alwaysAllowedToAttackParentsMainTarget:true
isUnselectable:false
canBeAttackedAndDamaged:true
addTransportedUnits:false
setDrawLayerOnBottom:false
redirectDamageToParent:false
canAttack:true
lockRotation:false
idleDir:0
keepAliveWhenParentDies:false
onCreateSpawnUnitOf:蝶心
showAllActionsFrom:if self.hasFlag(id=2)

[turret_Basic]
x:0
y:95
image:15.png
invisible:if not self.hp(greaterThan=0,lessThan=16299)
image_applyTeamColors:false
canShoot:false
idleDir:0
idleSpin:0
canAttackFlyingUnits:false
canAttackLandUnits:false
canAttackUnderwaterUnits:false

[turret_25]
x:0
y:95
@copyFromSection:turret_Basic
image:25.png
invisible:if not self.hp(greaterThan=16300,lessThan=20499)

[turret_50]
x:0
y:95
@copyFromSection:turret_Basic
image:50.png
invisible:if not self.hp(greaterThan=20500,lessThan=40999)

[turret_75]
x:0
y:95
@copyFromSection:turret_Basic
image:75.png
invisible:if not self.hp(greaterThan=41000,lessThan=61499)

[turret_100]
x:0
y:95
@copyFromSection:turret_Basic
image:100.png
invisible:if not self.hp(greaterThan=61500,lessThan=82001)

[action_领域]
text:闪电风暴
description:审判开始
pos:1
displayType:upgrade
#isVisible:if self.tags(includes='MissileBombardment')
#unitShowI:
price:350000,妖姬粒子=5000
addActionCooldownFor:200s
allowMultipleInQueue:false
buildSpeed:10s
canPlayerCancel: false
whenBuilding_cannotMove: true
onlyOneUnitAtATime: true
fireTurretXAtGround: missile_bombardment

[action_领域AI]
price:3500000,妖姬粒子=50000
addActionCooldownFor:600s
allowMultipleInQueue:false
buildSpeed:30s
canPlayerCancel: false
isVisible:if self.isControlledByAI()
ai_isHighPriority:true
addResources: ammo=100

[turret_missile_bombardment]
canShoot:false
projectile:missile_bombardment
x:0
y:0
size:0
limitingRange:2600
invisible:true

[turret_missile_bombardmentAI]
canShoot:true
projectile:missile_bombardment
x:0
y:0
size:0
canAttackFlyingUnits: if self.isControlledByAI()
canAttackLandUnits:   if self.isControlledByAI()
canAttackUnderwaterUnits: if self.isControlledByAI()
limitingRange:9900
invisible:true
resourceUsage:ammo=100

[projectile_missile_bombardment]
directDamage:0
life:100
instant:true
explodeEffect:NONE
speed:10
spawnUnit:超武*1